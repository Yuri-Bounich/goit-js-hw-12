{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["\nexport const renderImages = (images, page) => {\n    const gallery = document.querySelector('.gallery');\n  \n    if (images.length === 0) {\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      return;\n    }\n  \n    const markup = images\n      .map(\n        ({\n          webformatURL,\n          largeImageURL,\n          tags,\n          likes,\n          views,\n          comments,\n          downloads,\n        }, index) => \n          `\n              <li class=\"gallery-item\">\n                  <a href=\"${largeImageURL}\" class=\"gallery-link\">\n                      <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-image\" id=\"image-${page}-${index}\"/>\n                  </a>\n                  <div class=\"info\">\n                      <p class=\"info-item\"><span class=\"info-item-total\">Likes</span> ${likes}</p>\n                      <p class=\"info-item\"><span class=\"info-item-total\">Views</span> ${views}</p>\n                      <p class=\"info-item\"><span class=\"info-item-total\">Comments</span> ${comments}</p>\n                      <p class=\"info-item\"><span class=\"info-item-total\">Downloads</span> ${downloads}</p>\n                  </div>\n              </li>\n          `\n      )\n      .join('');\n  \n      gallery.insertAdjacentHTML('beforeend', markup);\n      // gallery.innerHTML += markup;\n    // gallery.innerHTML = markup;\n  };\n  \n  export const showLoader = () => {\n    const loader = document.querySelector('.loader');\n    loader.style.display = 'block';\n    \n  };\n\n  export const showLoaderNext = () => {\n    const loaderNext = document.querySelector('.loader-next');\n    loaderNext.style.display = 'flex';\n  };\n  \n  export const hideLoader = () => {\n    const loader = document.querySelector('.loader');\n    loader.style.display = 'none';\n  };\n\n  export const hideLoaderNext = () => {\n    const loaderNext = document.querySelector('.loader-next');\n    loaderNext.style.display = 'none';\n  };\n","// import axios from 'axios';\n// const API_KEY = '46054867-15d582c16d4d1b2cce4772636'\n// const BASE_URL = 'https://pixabay.com/api/'\n\n// async function fetchImages(params = {}) {\n//   const options = new URLSearchParams(params);\n//   const url = {};\n\n//   const data = await axios.get(url,options)\n// }\n\n\n\n\n\n\nimport { hideLoaderNext } from './render-functions';\nimport axios from 'axios';\nconst API_KEY = '46054867-15d582c16d4d1b2cce4772636'\nconst BASE_URL = 'https://pixabay.com/api/'\naxios.defaults.baseURL = BASE_URL; \nlet page = 1;\nlet perPage = 15;\n\n  export const fetchImages = async query => {\n    try {\n        const params = new URLSearchParams({\n            per_page: perPage,\n            page: page\n          });\n        \n        const response = await axios.get(\n          `?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&${params}`\n        );\n    \n    const data = response.data;\n    const totalPages = Math.ceil(data.totalHits / perPage);\n\n    if (page > totalPages) {\n      hideLoaderNext();\n      return iziToast.error({\n        position: \"topRight\",\n        message: \"We're sorry, but you've reached the end of search results.\"\n      });\n  }\n\n        if (data.hits.length === 0) {\n          throw new Error('No images found for this query.');\n        }\n    \n        return data.hits;\n      } catch (error) {\n        console.error(`Error fetching images: ${error.message}`);\n        throw error; // Перепіднімаємо помилку, щоб її можна було обробити в іншому місці\n      }\n    };\n\n\n\n\n\n\n","\n// // Описаний у документації\n// import iziToast from \"izitoast\";\n// // Додатковий імпорт стилів\n// import \"izitoast/dist/css/iziToast.min.css\";\n\n// import { fetchImages } from './js/pixabay-api.js';\n// import { renderImages,  showLoader, hideLoader, showLoaderNext} from './js/render-functions.js';\n\n// // Описаний у документації\n// import SimpleLightbox from \"simplelightbox\";\n// // Додатковий імпорт стилів\n// import \"simplelightbox/dist/simple-lightbox.min.css\";\n\n// const searchForm = document.querySelector('.form');\n// const galleryElement = document.querySelector('.gallery');\n// const gallery = new SimpleLightbox('.gallery a', { \n//     captionsData: 'alt',\n//     captionDelay: 250, });\n\n// const fetchNextImages = document.querySelector(\".loader-next\");\n\n// // const fetchPostsBtn = document.querySelector(\".btn\");\n// // // const postList = document.querySelector(\".posts\");\n    \n// let page = 1;\n// // let perPage = 10;\n\n\n\n\n// searchForm.addEventListener('submit', event => {\n//     //Запобігає перезавантаженню сторінки\n//     event.preventDefault();\n  \n//     // Отримуємо значення з поля запиту\n//     const query = event.target.elements.query.value.trim();\n//     // Перевіряємо, чи не є запит пустим\n//     if (!query) {\n//       return; // Якщо пустий, виходимо з обробника\n//     }\n  \n//     //Очищає попередні результати в галереї\n//     galleryElement.innerHTML = '';\n\n//     //Показує лоадер і викликає функцію fetchImages(query) для отримання зображень з API\n//     showLoader();\n//     //Відображає отримані зображення за допомогою renderImages() або показує помилку через iziToast\n//     fetchImages(query)\n//       .then(images => {\n//         renderImages(images);\n//         gallery.refresh();\n//       })\n//       .catch(error => {\n//         console.error(error);\n//         iziToast.error({\n//           title: 'Error',\n//           message:\n//             'Sorry, there are no images matching your search query. Please try again!',\n//         });\n//       })\n//       //Ховає лоадер після виконання\n//       .finally(() => {\n//         hideLoader();\n//       });\n//       showLoaderNext(); \n//       // Очищуємо поля форми\n//       searchForm.reset(); \n//     });\n    \n    \n//     fetchNextImages.addEventListener('click', async () => {\n//       try {\n//         const posts = await fetchImages();\n//         renderPosts(posts);\n//         // Increase the group number\n//         page += 1;\n//       } \n//       catch (error) {\n//         console.log(error);\n//       }\n//     });\n\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { fetchImages } from './js/pixabay-api.js';\nimport { renderImages, showLoader, hideLoader, showLoaderNext } from './js/render-functions.js';\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst searchForm = document.querySelector('.form');\nconst galleryElement = document.querySelector('.gallery');\nconst gallery = new SimpleLightbox('.gallery a', { \n    captionsData: 'alt',\n    captionDelay: 250, \n});\nconst fetchNextImagesBtn = document.querySelector('.btn'); \nlet page = 1;\nlet query = '';\n\nsearchForm.addEventListener('submit', event => {\n  event.preventDefault();\n  \n  query = event.target.elements.query.value.trim(); // Зберігаємо запит\n  \n  if (!query) return;\n\n   // Скидаємо галерею та сторінку при новому запиті\n  galleryElement.innerHTML = ''; // Очищуємо попередні результати тільки при новому запиті\n  page = 1; // Скидаємо сторінку при новому запиті\n\n  showLoader();\n  \n  fetchImages(query, page)\n    .then(images => {\n      page += 1; // Збільшуємо сторінку після завантаження\n      renderImages(images);\n      gallery.refresh();\n    \n    })\n    .catch(error => {\n      console.error(error);\n      iziToast.error({\n        title: 'Error',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n      });\n    })\n    .finally(() => {\n      hideLoader();\n      showLoaderNext(); \n    });\n  \n  searchForm.reset(); // Очищення поля вводу після подачі форми\n});\n\nfetchNextImagesBtn.addEventListener('click', async () => {\n  page += 1; \n  try {\n    const images = await fetchImages(query, page);\n\n    if (images.length === 0) {\n      return iziToast.error({\n          title: 'Error',\n          message: 'No more images to load.',\n      });\n  }\n    // Додаємо отримані зображення в галерею\n    renderImages(images);\n    gallery.refresh();\n\n     \n    // Отримати висоту першої картки галереї\n    const firstCard = document.querySelector('.gallery-item');\n    if (firstCard) {\n      const cardHeight = firstCard.getBoundingClientRect().height; // Висота картки\n      // Прокрутити сторінку на подвоєну висоту картки\n      window.scrollBy({\n        top: cardHeight * 2,      // Прокрутка вниз на дві висоти картки\n        left: 0,                   // Прокрутка по горизонталі не змінюється\n        behavior: 'smooth'         // Плавна прокрутка\n      });\n    }\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoader(); \n  }\n});\n\n// galleryElement.innerHTML = ''; // Очищуємо попередні результати\n "],"names":["renderImages","images","page","gallery","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","index","showLoader","loader","showLoaderNext","loaderNext","hideLoader","hideLoaderNext","API_KEY","BASE_URL","axios","perPage","fetchImages","query","params","data","totalPages","error","searchForm","galleryElement","SimpleLightbox","fetchNextImagesBtn","event","iziToast","firstCard","cardHeight"],"mappings":"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"}